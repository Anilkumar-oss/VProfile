trigger:
    branches:
       include:
         - main

pool:
   vmImage: 'ubuntu-latest'


steps:
   - task: Maven@3
     displayName: 'Maven build'
     inputs:
        mavenPomFile: 'pom.xml'
        goals: 'package'
        options: '-DskipTests=true'
        publishJUnitResults: false
   - task: PublishBuildArtifacts@1
     inputs:
       PathtoPublish: '$(Build.ArtifactStagingDirectory)'
       ArtifactName: 'drop'
       publishLocation: 'Container'
   - task: DockerInstaller@0
     inputs:
       dockerVersion: '17.09.0-ce'
   - task: Docker@2
     displayName: 'Build Docker image'
     inputs:
      command: build
      dockerfile: 'path/to/Dockerfile'
      imageName: 'my-docker-image:$(Build.ArtifactStagingDirectory)'
      includeLatestTag: true 
   
   